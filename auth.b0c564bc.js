function e(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},s={},o=r.parcelRequire752b;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in s){var r=s[e];delete s[e];var o={id:e,exports:{}};return t[e]=o,r.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,r){s[e]=r},r.parcelRequire752b=o);var a=o("19McP");e(a).Notify.init({position:"center-bottom",distance:"130px",opacity:.8}),o("geVIX");var n=o("fDHq9"),i=o("3JKSU");const c="GameStore-users";class u{static createUser(e){e.password=u.#e(e.password),e.login&&e.email&&e.password?i.DynamoAPI.createItem(c,e):console.log("Error user",e)}static async getUser(e){const r=(await u.getUsers()).find((r=>r.login===e));return(0,n.saveToLS)("user",r),r}static async getUsers(){try{const e=await i.DynamoAPI.getAllItems(c);return(0,n.saveToLS)("users",e),e}catch(e){return console.log(e),[]}}static async authorized(e,r){return!!u.isCorrectPassword(e,r)&&((0,n.saveToLS)("isAuthorized",!0),!0)}static async isFreeLogin(e){return!(await u.getUsers()).some((r=>r.login===e))}static async isCorrectPassword(e,r){try{const t=await u.getUser(e);if(!t)throw new Error("Not User");return u.#e(r)===t.password&&(0,n.saveToLS)("user",t),u.#e(r)===t.password}catch(e){return console.log(e.message),!1}}static#e(e){return(0,n.sha256)(e)}}n=o("fDHq9");document.querySelector(".js-auth-form").addEventListener("submit",(async r=>{r.preventDefault();const t=r.currentTarget.elements.login.value,s=r.currentTarget.elements.password.value;var o;await u.isCorrectPassword(t,s)?(u.authorized(t,s),(0,n.redirect)()):(o="Login or Password is not correct!",e(a).Notify.failure(o))}));
//# sourceMappingURL=auth.b0c564bc.js.map
