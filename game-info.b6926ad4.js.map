{"mappings":"oeAAAA,EAAA,S,4BCAO,SAASC,EAAUC,GACxB,MAAMC,EAAWC,SAASC,cAAc,sBACxC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,KAAKC,MAAMN,GAASI,IACtCH,EAASM,SAASH,GAAGI,UAAUC,IAAI,4BAGrCP,SAASC,cAAc,qBAAqBO,YAAcV,CAC5D,C,8BDGA,MAAMW,EAAO,CACXC,aAAcV,SAASC,cAAc,sBAGjCU,EAAY,CAChBC,YAAY,GAoBd,IAAIC,EAfJJ,EAAKC,aAAaI,iBAAiB,SAASC,IAC1C,MAAMC,EAAWhB,SAASC,cAAc,cAClCgB,EAAajB,SAASC,cAAc,kBACtCU,EAAUC,YACZI,EAASE,MAAMC,UAAY,QAC3BF,EAAWX,UAAUc,OAAO,UAE5BJ,EAASE,MAAMC,UAAY,OAC3BF,EAAWX,UAAUC,IAAI,SAG3BI,EAAUC,YAAcD,EAAUC,UAAU,IAK9CS,iBACE,IAAIC,EAASC,OAAOC,SAASC,OAAOC,QAAQ,OAAQ,IACpDb,GAAc,EAAAc,EAAAC,YAAW,eAEpBf,GAAyB,IAAVS,EAERT,IACVA,QAAoBgB,EAAAC,SAASC,QAAQT,IACrC,EAAAK,EAAAK,UAAS,cAAenB,IAHxBU,OAAOC,SAASS,SAAWC,EAAAC,KAS7BtC,EAAU,EACZ,CAEAuC","sources":["src/scripts/game-info.js","src/modules/stars.js"],"sourcesContent":["import 'lazysizes';\nimport 'lazysizes/plugins/parent-fit/ls.parent-fit';\n\nimport { loadFromLS, saveToLS } from './helpers';\nimport { setRating } from '../modules/stars';\nimport { DataBase } from '../modules/mongodb';\nimport { HOST } from './constants';\n\n// ============================================\n\nconst refs = {\n  loadMoreInfo: document.querySelector('.js-btn-more-info'),\n};\n\nconst CONSTANTS = {\n  isFullInfo: false,\n};\n\n// ============================================\n\nrefs.loadMoreInfo.addEventListener('click', e => {\n  const infoElem = document.querySelector('.game-desc');\n  const shadowElem = document.querySelector('.bottom-shadow');\n  if (CONSTANTS.isFullInfo) {\n    infoElem.style.maxHeight = '200px';\n    shadowElem.classList.remove('hide');\n  } else {\n    infoElem.style.maxHeight = 'none';\n    shadowElem.classList.add('hide');\n  }\n\n  CONSTANTS.isFullInfo = !CONSTANTS.isFullInfo;\n});\n\n// ============================================\nlet currentGame;\nasync function onLoadPage() {\n  let gameId = window.location.search.replace('?id=', '');\n  currentGame = loadFromLS('currentGame');\n\n  if (!currentGame && gameId == '') {\n    window.location.pathname = HOST;\n  } else if (!currentGame) {\n    currentGame = await DataBase.getGame(gameId);\n    saveToLS('currentGame', currentGame);\n  } else {\n    // TODO\n    // window.location.search = `?id=${currentGame.id}`;\n  }\n\n  setRating(5);\n}\n\nonLoadPage();\n","export function setRating(rating) {\n  const starList = document.querySelector('.star-rating__live');\n  for (let i = 0; i < Math.round(rating); i++) {\n    starList.children[i].classList.add('star-rating__item_active');\n  }\n\n  document.querySelector('.star-rating__avg').textContent = rating;\n}\n"],"names":["parcelRequire","$af370038f0f41ea1$export$cb1b49f9f209a26c","rating","starList","document","querySelector","i","Math","round","children","classList","add","textContent","$ca0a232763ecd871$var$refs","loadMoreInfo","$ca0a232763ecd871$var$CONSTANTS","isFullInfo","$ca0a232763ecd871$var$currentGame","addEventListener","e","infoElem","shadowElem","style","maxHeight","remove","async","gameId","window","location","search","replace","$fDHq9","loadFromLS","$l3ylQ","DataBase","getGame","saveToLS","pathname","$geVIX","HOST","$ca0a232763ecd871$var$onLoadPage"],"version":3,"file":"game-info.b6926ad4.js.map"}