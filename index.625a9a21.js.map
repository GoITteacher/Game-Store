{"mappings":"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","sources":["src/scripts/index.js","src/templates/game-template.hbs","src/scripts/pages-scripts/library.js"],"sourcesContent":["import 'lazysizes';\nimport 'lazysizes/plugins/parent-fit/ls.parent-fit';\nimport './pages-scripts/library';\n\nimport { DataBase } from '../modules/database';\n\n// for(let i=0; i<100;i++){\n//     setTimeout(()=>{\n//         DataBase.createGame()\n//     },i*1000);  \n// };\n","<li class=\"game-card\" data-id=\"{{id}}\">\n    <div class=\"game-card__img\">\n        <img alt=\"image\" class=\"lazyload\" data-src=\"{{images.[0]}}\" src=\"https://wallpaperaccess.com/full/1457170.jpg\">\n    </div>\n    <div class=\"game-card__name\">{{name}}</div>\n    <div class=\"game-card__price\">USD {{price}}</div>\n</li>","import gameTemplate from '../../templates/game-template.hbs';\nimport { DataBase } from '../../modules/database/index.js';\nimport { loadFromLS, redirect, saveToLS } from '../helpers';\nconst refs = {\n  gameListEl: document.querySelector('.js-game-list'),\n  navMenuElem: document.querySelector('.js-nav-menu'),\n};\nconst emptyElem = refs.gameListEl.nextElementSibling;\nconsole.log();\n\nlet GAMES = [\n  {\n    os: 'Windows',\n    media: [\n      'https://source.unsplash.com/1920x1080/?random=7370&game',\n      'https://source.unsplash.com/1920x1080/?random=8505&game',\n      'https://source.unsplash.com/1920x1080/?random=1553&game',\n      'https://source.unsplash.com/1920x1080/?random=5662&game',\n    ],\n    sale: 74,\n    name: 'Incredible Wooden Pants',\n    desc: 'Odio occaecati commodi sapiente dolores. Molestiae accusantium porro eum quas praesentium consequuntur deleniti. Fuga mollitia incidunt atque. Minima nisi fugit sapiente. Ratione explicabo saepe occaecati. Et esse eveniet accusamus veritatis esse quod.\\nAliquid quasi saepe vel harum molestiae rerum occaecati minima distinctio. Sit culpa tempore adipisci cumque consequuntur consequatur minus quaerat. Consectetur esse blanditiis provident a nulla quas esse quasi a. Sint pariatur possimus quia eveniet asperiores facere. Consequuntur quasi similique.\\nTenetur quae earum vel in eius. Illum soluta accusantium aliquam sapiente dicta ullam reprehenderit. Nisi aut voluptatum qui quibusdam. Deleniti itaque dolorum architecto omnis tenetur. At et voluptate.\\nVeritatis consectetur adipisci iste temporibus. Rem aut laudantium. Mollitia ab corrupti non voluptatem dolor.\\nImpedit explicabo voluptas aut dignissimos. Maiores natus velit. Voluptas asperiores aperiam ea quaerat consequuntur repellendus officia maxime dignissimos. Asperiores nemo quae quaerat porro quod labore ab. Fuga id suscipit velit.\\nRecusandae totam fugiat vel ducimus quos vel labore. Facilis cum commodi in corporis reiciendis assumenda nemo recusandae. Aperiam cum consectetur in exercitationem earum. Numquam doloribus suscipit reiciendis quidem saepe necessitatibus dolore sunt. Adipisci non amet beatae dignissimos a debitis consectetur corporis harum.',\n    date_release: {},\n    publisher: 'Collier - Donnelly',\n    images: [\n      'https://source.unsplash.com/1920x1080/?random=6108&game',\n      'https://source.unsplash.com/1920x1080/?random=3416&game',\n      'https://source.unsplash.com/1920x1080/?random=7382&game',\n      'https://source.unsplash.com/1920x1080/?random=5074&game',\n    ],\n    homepage: 'http://salty-shop.info',\n    price: 9737,\n    id: 'ldhsnw8c',\n    genres: ['Metal', 'Funk', 'Soul'],\n    author: 'Shelly Altenwerth',\n  },\n];\n\nasync function loadGames() {\n  const games = await DataBase.getGames(1);\n  GAMES = games;\n  saveToLS('games', games);\n  if (games.length) {\n    refs.gameListEl.innerHTML = games.map(gameTemplate).join('');\n  } else {\n    refs.gameListEl.children[0].style.opacity = '1';\n  }\n}\n\nloadGames();\n\nrefs.gameListEl.addEventListener('click', e => {\n  if (e.target === e.currentTarget) return;\n  const gameEl = e.target.closest('[data-id]');\n  const currentGame = GAMES.find(el => el.id === gameEl.dataset.id);\n  // TODO Якщо не знайшло такої гри то зробити запит на сервер\n  saveToLS('currentGame', currentGame);\n  redirect('game-info.html', `?id=${currentGame.id}`);\n});\n\nfunction renderGame(games, reset = true) {\n  const elems = refs.navMenuElem.querySelectorAll('[name]');\n  const gameSort = elems[1].value;\n\n  if (gameSort != 'null') {\n    reset = true;\n    games = GAMES;\n  }\n\n  games = sortArray(games);\n\n  if (reset) refs.gameListEl.innerHTML = '';\n  if (games.length) {\n    refs.gameListEl.insertAdjacentHTML(\n      'beforeend',\n      games.map(gameTemplate).join('')\n    );\n    emptyElem.classList.add('hide');\n  } else {\n    refs.gameListEl.innerHTML = '';\n    emptyElem.classList.remove('hide');\n  }\n}\n\nrefs.navMenuElem.addEventListener('change', e => {\n  renderGame(GAMES);\n});\n\nlet isActiveQuery = false;\ndocument.addEventListener('scroll', onWindowScroll);\nasync function onWindowScroll(e) {\n  const element = e.target.documentElement;\n  const clientHeight = element.clientHeight;\n  const scrollHeight = element.scrollHeight - clientHeight;\n  const scrollTop = scrollHeight - element.scrollTop;\n  if (scrollTop < 600 && !isActiveQuery) {\n    isActiveQuery = true;\n    const games = await DataBase.getGames(DataBase.page + 1);\n\n    if (games.length !== 0) {\n      isActiveQuery = false;\n      GAMES.push(...games);\n      saveToLS('games', GAMES);\n      renderGame(games, false);\n    } else document.removeEventListener('scroll', onWindowScroll);\n  }\n}\n\nfunction sortArray(games) {\n  const elems = refs.navMenuElem.querySelectorAll('[name]');\n  const gameName = elems[0].value;\n  const gameSort = elems[1].value;\n  const gameGenre = elems[2].value;\n  const gameRating = elems[3].value;\n  if (gameName) games = games.filter(el => el.name.includes(gameName));\n  if (gameGenre != 'null')\n    games = games.filter(el => el.genres.includes(gameGenre));\n  if (gameRating != 'null')\n    games = games.filter(el => Math.round(+el.rating) === +gameRating);\n\n  if (gameSort != 'null') {\n    games = [...games].sort((a, b) => {\n      if (gameSort === 'name') {\n        return a[gameSort].localeCompare(b[gameSort]);\n      } else {\n        return Number(a[gameSort]) - Number(b[gameSort]);\n      }\n    });\n  }\n\n  return games;\n}\n"],"names":["parcelRequire","$e2fd4dbb570aaa17$export$2e2bcd8739ae039","$parcel$interopDefault","template","compiler","main","container","depth0","helpers","partials","data","stack1","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","name","hash","loc","start","line","column","end","lambda","useData","$e3c701a350a10011$var$refs","gameListEl","document","querySelector","navMenuElem","$e3c701a350a10011$var$emptyElem","nextElementSibling","console","log","$e3c701a350a10011$var$GAMES","os","media","sale","desc","date_release","publisher","images","homepage","price","id","genres","author","$e3c701a350a10011$var$renderGame","games","reset","querySelectorAll","value","elems","gameName","gameSort","gameGenre","gameRating","filter","el","includes","Math","round","rating","sort","a","b","localeCompare","Number","$e3c701a350a10011$var$sortArray","innerHTML","length","insertAdjacentHTML","map","join","classList","add","remove","async","$ivJx2","DataBase","getGames","$fDHq9","saveToLS","children","style","opacity","$e3c701a350a10011$var$loadGames","addEventListener","e","target","currentTarget","gameEl","closest","currentGame","find","dataset","redirect","$e3c701a350a10011$var$isActiveQuery","$e3c701a350a10011$var$onWindowScroll","element","documentElement","clientHeight","scrollHeight","scrollTop","page","push","removeEventListener"],"version":3,"file":"index.625a9a21.js.map"}