function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},s=t.parcelRequire752b;null==s&&((s=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var s={id:e,exports:{}};return r[e]=s,t.call(s.exports,s,s.exports),s.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){o[e]=t},t.parcelRequire752b=s);var n=s("19McP");function a(t){e(n).Notify.failure(t)}e(n).Notify.init({position:"center-bottom",distance:"130px",opacity:.8}),s("geVIX");var i=s("fDHq9"),l=s("3JKSU");const c="GameStore-users";class u{static createUser(e){e.password=u.#e(e.password),e.login&&e.email&&e.password?(console.log("created"),l.DynamoAPI.createItem(c,e)):console.log("Error user",e)}static async getUser(e){const t=(await u.getUsers()).find((t=>t.login===e));return(0,i.saveToLS)("user",t),t}static async getUsers(){try{const e=await l.DynamoAPI.getAllItems(c);return(0,i.saveToLS)("users",e),e}catch(e){return console.log(e),[]}}static async authorized(e,t){return!!u.isCorrectPassword(e,t)&&((0,i.saveToLS)("isAuthorized",!0),!0)}static async isFreeLogin(e){return!(await u.getUsers()).some((t=>t.login===e))}static async isCorrectPassword(e,t){try{const r=await u.getUser(e);if(!r)throw new Error("Not User");return u.#e(t)===r.password&&(0,i.saveToLS)("user",r),u.#e(t)===r.password}catch(e){return console.log(e.message),!1}}static#e(e){return(0,i.sha256)(e)}}i=s("fDHq9");document.querySelector(".js-auth-form").addEventListener("submit",(async e=>{e.preventDefault();const t=e.currentTarget.elements.email.value,r=e.currentTarget.elements.login.value,o=e.currentTarget.elements.password.value,s=e.currentTarget.elements["check-password"].value;if(r.length<4)return console.log("Login length must be greater than 3!"),void a("Login length must be greater than 3!");if(!await u.isFreeLogin(r))return console.log("Login already in use!"),void a("Login already in use!");if(o.length<6)return console.log("Password length must be greater than 3!"),void a("Password length must be greater than 3!");if(o!==s)return console.log("Passwords do not match!"),void a("Passwords do not match!");const n={login:r,email:t,password:o,games:[]};await u.createUser(n),setTimeout((()=>{(0,i.redirect)("auth.html")}),100)}));
//# sourceMappingURL=registration.a634777d.js.map
