function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},s={},o=t.parcelRequire752b;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in s){var t=s[e];delete s[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){s[e]=t},t.parcelRequire752b=o);var n=o("19McP");function a(t){e(n).Notify.failure(t)}e(n).Notify.init({position:"center-bottom",distance:"130px",opacity:.8}),o("geVIX");var i=o("fDHq9"),l=o("3JKSU");const c="GameStore-users";class u{static createUser(e){e.password=u.#e(e.password),e.login&&e.email&&e.password?l.DynamoAPI.createItem(c,e):console.log("Error user",e)}static async getUser(e){const t=(await u.getUsers()).find((t=>t.login===e));return(0,i.saveToLS)("user",t),t}static async getUsers(){try{const e=await l.DynamoAPI.getAllItems(c);return(0,i.saveToLS)("users",e),e}catch(e){return console.log(e),[]}}static async authorized(e,t){return!!u.isCorrectPassword(e,t)&&((0,i.saveToLS)("isAuthorized",!0),!0)}static async isFreeLogin(e){return!(await u.getUsers()).some((t=>t.login===e))}static async isCorrectPassword(e,t){try{const r=await u.getUser(e);if(!r)throw new Error("Not User");return u.#e(t)===r.password&&(0,i.saveToLS)("user",r),u.#e(t)===r.password}catch(e){return console.log(e.message),!1}}static#e(e){return(0,i.sha256)(e)}}i=o("fDHq9");document.querySelector(".js-auth-form").addEventListener("submit",(async e=>{e.preventDefault();const t=e.currentTarget.elements.email.value,r=e.currentTarget.elements.login.value,s=e.currentTarget.elements.password.value,o=e.currentTarget.elements["check-password"].value;if(r.length<4)return console.log("Login length must be greater than 3!"),void a("Login length must be greater than 3!");if(!await u.isFreeLogin(r))return console.log("Login already in use!"),void a("Login already in use!");if(s.length<6)return console.log("Password length must be greater than 3!"),void a("Password length must be greater than 3!");if(s!==o)return console.log("Passwords do not match!"),void a("Passwords do not match!");const n={login:r,email:t,password:s,games:[]};await u.createUser(n),setTimeout((()=>{(0,i.redirect)("auth.html")}),100)}));
//# sourceMappingURL=registration.e9284e1f.js.map
