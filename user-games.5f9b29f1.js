function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},t={},o=n.parcelRequire752b;null==o&&((o=function(e){if(e in a)return a[e].exports;if(e in t){var n=t[e];delete t[e];var o={id:e,exports:{}};return a[e]=o,n.call(o.exports,o,o.exports),o.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,n){t[e]=n},n.parcelRequire752b=o),o("7nHVT"),o("9HXUh");var l=o("ivJx2"),r=o("fDHq9");var s=e(o("c1JL1")).template({compiler:[8,">= 4.3.0"],main:function(e,n,a,t,o){var l,r,s=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,i="function",d=e.escapeExpression,u=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<li data-id="'+d(typeof(r=null!=(r=u(a,"id")||(null!=n?u(n,"id"):n))?r:c)===i?r.call(s,{name:"id",hash:{},data:o,loc:{start:{line:1,column:13},end:{line:1,column:19}}}):r)+'">\n    <div class="game-img"><img alt="image" class="lazyload" data-src="'+d(e.lambda(null!=(l=null!=n?u(n,"images"):n)?u(l,"0"):l,n))+'"\n            src="https://wallpaperaccess.com/full/1457170.jpg"></div>\n    <div class="cart-info">\n        <span>'+d(typeof(r=null!=(r=u(a,"name")||(null!=n?u(n,"name"):n))?r:c)===i?r.call(s,{name:"name",hash:{},data:o,loc:{start:{line:5,column:14},end:{line:5,column:22}}}):r)+"</span>\n        <span>Author: "+d(typeof(r=null!=(r=u(a,"author")||(null!=n?u(n,"author"):n))?r:c)===i?r.call(s,{name:"author",hash:{},data:o,loc:{start:{line:6,column:22},end:{line:6,column:32}}}):r)+"</span>\n        <span>OS: "+d(typeof(r=null!=(r=u(a,"os")||(null!=n?u(n,"os"):n))?r:c)===i?r.call(s,{name:"os",hash:{},data:o,loc:{start:{line:7,column:18},end:{line:7,column:24}}}):r)+"</span>\n        <span>Price: "+d(typeof(r=null!=(r=u(a,"price")||(null!=n?u(n,"price"):n))?r:c)===i?r.call(s,{name:"price",hash:{},data:o,loc:{start:{line:8,column:21},end:{line:8,column:30}}}):r)+' UAH</span>\n        <button class="btn">Delete</button>\n    </div>\n</li>'},useData:!0});const c={addGameBtn:document.querySelector(".js-add-game"),backdrop:document.querySelector(".backdrop"),createForm:document.querySelector(".js-create-form"),errorPage:document.querySelector(".js-error-page"),gamesListElem:document.querySelector(".js-cart-list")};async function i(){const e=(0,r.loadFromLS)("user")?.games,n=await l.DataBase.getGame(...e);if(0===n.length)return c.gamesListElem.innerHTML="",void c.errorPage.classList.remove("hide");c.errorPage.classList.add("hide"),c.gamesListElem.innerHTML=n.map(s).join("")}!function(){function e(e){"Escape"==e.key&&n()}function n(){document.body.classList.remove("show"),document.removeEventListener("keydown",e)}function n(){document.body.classList.remove("show")}c.addGameBtn.addEventListener("click",(()=>{document.body.classList.add("show"),document.addEventListener("keydown",e)})),c.backdrop.addEventListener("click",(e=>{e.target===e.currentTarget&&n()}))}(),c.createForm.addEventListener("submit",(async e=>{e.preventDefault();const n=new FormData(e.target),a={};for(let[e,t]of n.entries())a[e]=t;const t=await l.DataBase.createGame();l.DataBase.addGameForUser(t),i(),document.body.classList.remove("show")})),i(),c.gamesListElem.addEventListener("click",(e=>{if(e.target===e.currentTarget)return;const n=e.target.closest("li").dataset.id;"BUTTON"===e.target.nodeName?function(e){l.DataBase.deleteGame(e),l.DataBase.removeGameFromUser(e),i()}(n):(0,r.redirect)("game-info.html",`?id=${n}`)}));
//# sourceMappingURL=user-games.5f9b29f1.js.map
