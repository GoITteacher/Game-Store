function e(e){return e&&e.__esModule?e.default:e}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=a.parcelRequire752b;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,a.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,a){n[e]=a},a.parcelRequire752b=o),o("7nHVT"),o("9HXUh");var r=o("ivJx2"),l=o("fDHq9");var s=e(o("c1JL1")).template({compiler:[8,">= 4.3.0"],main:function(e,a,t,n,o){var r,l,s=null!=a?a:e.nullContext||{},c=e.hooks.helperMissing,d="function",i=e.escapeExpression,u=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'<li data-id="'+i(typeof(l=null!=(l=u(t,"id")||(null!=a?u(a,"id"):a))?l:c)===d?l.call(s,{name:"id",hash:{},data:o,loc:{start:{line:1,column:13},end:{line:1,column:19}}}):l)+'">\n    <div class="game-img"><img alt="image" class="lazyload" data-src="'+i(e.lambda(null!=(r=null!=a?u(a,"images"):a)?u(r,"0"):r,a))+'"\n            src="https://wallpaperaccess.com/full/1457170.jpg"></div>\n    <div class="cart-info">\n        <span>'+i(typeof(l=null!=(l=u(t,"name")||(null!=a?u(a,"name"):a))?l:c)===d?l.call(s,{name:"name",hash:{},data:o,loc:{start:{line:5,column:14},end:{line:5,column:22}}}):l)+"</span>\n        <span>Author: "+i(typeof(l=null!=(l=u(t,"author")||(null!=a?u(a,"author"):a))?l:c)===d?l.call(s,{name:"author",hash:{},data:o,loc:{start:{line:6,column:22},end:{line:6,column:32}}}):l)+"</span>\n        <span>OS: "+i(typeof(l=null!=(l=u(t,"os")||(null!=a?u(a,"os"):a))?l:c)===d?l.call(s,{name:"os",hash:{},data:o,loc:{start:{line:7,column:18},end:{line:7,column:24}}}):l)+"</span>\n        <span>Price: "+i(typeof(l=null!=(l=u(t,"price")||(null!=a?u(a,"price"):a))?l:c)===d?l.call(s,{name:"price",hash:{},data:o,loc:{start:{line:8,column:21},end:{line:8,column:30}}}):l)+' USD</span>\n        <button class="btn">Delete</button>\n    </div>\n</li>'},useData:!0});const c={addGameBtn:document.querySelector(".js-add-game"),backdrop:document.querySelector(".backdrop"),createForm:document.querySelector(".js-create-form"),errorPage:document.querySelector(".js-error-page"),gamesListElem:document.querySelector(".js-cart-list"),addBtn:document.querySelector(".js-btn-add")};async function d(){const e=(0,l.loadFromLS)("user")?.games||[],a=await r.DataBase.getGame(...e);if(0===a.length)return c.gamesListElem.innerHTML="",c.errorPage.classList.remove("hide"),void c.addBtn.classList.add("hide");c.addBtn.classList.remove("hide"),c.errorPage.classList.add("hide"),c.gamesListElem.innerHTML=a.map(s).join("")}!function(){function e(){document.body.classList.add("show"),document.addEventListener("keydown",a)}function a(e){"Escape"==e.key&&t()}function t(){document.body.classList.remove("show"),document.removeEventListener("keydown",a)}function t(){document.body.classList.remove("show")}c.addGameBtn.addEventListener("click",e),c.addBtn.addEventListener("click",e),c.backdrop.addEventListener("click",(e=>{e.target===e.currentTarget&&t()}))}(),c.createForm.addEventListener("submit",(async e=>{e.preventDefault();const a=new FormData(e.target),t={...r.DataBase.randomGame()};t.date_release=Date.now();for(let[e,n]of a.entries())e=e.replace("game_",""),t[e]=n;const n=await r.DataBase.createGame(t);r.DataBase.addGameForUser(n),d(),document.body.classList.remove("show"),e.target.reset()})),d(),c.gamesListElem.addEventListener("click",(e=>{if(e.target===e.currentTarget)return;const a=e.target.closest("li").dataset.id;"BUTTON"===e.target.nodeName?function(e){r.DataBase.deleteGame(e),r.DataBase.removeGameFromUser(e),d()}(a):(0,l.redirect)("game-info.html",`?id=${a}`)}));
//# sourceMappingURL=user-games.ac5254d8.js.map
